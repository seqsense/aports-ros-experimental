# Contributor: Kazuki Takahashi <ktakahashi@seqsense.com>
# Maintainer:
pkgname=metis
pkgver=5.2.1
pkgrel=0
pkgdesc="Serial Graph Partitioning and Fill-reducing Matrix Ordering"
url="http://glaros.dtc.umn.edu/gkhome/views/metis"
arch="all"
license="Apache-2.0"
# No test is provided.
options="!check"
makedepends="build-base cmake"
subpackages="$pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/KarypisLab/METIS/archive/refs/tags/v$pkgver.tar.gz"

builddir="$srcdir/$pkgname-$pkgver"

build() {
  make config shared=1 prefix=/usr
  make
}

package() {
  make DESTDIR="$pkgdir" install

  install -Dm644 "$builddir"/LICENSE.txt "$pkgdir"/usr/share/licenses/$pkgname/LICENSE.txt
}

sha512sums="
69127b7a777f9ba14cf399a7122000af9d6094a5f44be600a28384cfc0495c024fb0c6eab37c4473a5763ec1077cd9f30d9bcbb3c952462f6c9ead31c6b9e790  metis-5.2.1.tar.gz
"
