# Contributor: Kazuki Takahashi <ktakahashi@seqsense.com>
# Maintainer:
pkgname=metis
pkgver=5.2.1
pkgrel=0
pkgdesc="Serial Graph Partitioning and Fill-reducing Matrix Ordering"
url="https://github.com/KarypisLab/METIS"
arch="all"
license="Apache-2.0"
options="!check" # No test is provided.
makedepends="build-base cmake gklib-dev"
subpackages="$pkgname-dev $pkgname-doc"
source="$pkgname-$pkgver.tar.gz::https://github.com/KarypisLab/METIS/archive/refs/tags/v$pkgver.tar.gz
	bump-cmake-min-version.patch"

builddir="$srcdir/METIS-$pkgver"

build() {
	make config shared=1 prefix=/usr gklib_path=/usr
	make
}

package() {
	make DESTDIR="$pkgdir" install

	install -Dm644 "$builddir"/LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
}

sha512sums="
69127b7a777f9ba14cf399a7122000af9d6094a5f44be600a28384cfc0495c024fb0c6eab37c4473a5763ec1077cd9f30d9bcbb3c952462f6c9ead31c6b9e790  metis-5.2.1.tar.gz
969964d38d6334872b862085c2df24bb91d45181df46c3eebe380f0940ab7a40bd82774a38bab723810d0d88c0c41d7c5167c5353ec6d95600df73c169838316  bump-cmake-min-version.patch
"
