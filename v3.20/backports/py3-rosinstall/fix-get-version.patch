diff --git a/setup.py b/setup.py
index 8e72d61..5ec7c0f 100644
--- a/setup.py
+++ b/setup.py
@@ -1,18 +1,20 @@
 from setuptools import setup
 
-import imp
+import sys
+import importlib.util
+from pathlib import Path
 
 
 def get_version():
-    ver_file = None
     try:
-        ver_file, pathname, description = imp.find_module('__version__', ['src/rosinstall'])
-        vermod = imp.load_module('__version__', ver_file, pathname, description)
-        version = vermod.version
-        return version
-    finally:
-        if ver_file is not None:
-            ver_file.close()
+        version_file_path = Path('src/rosinstall/__version__.py')
+        spec = importlib.util.spec_from_file_location('__version__', version_file_path)
+        version_module = importlib.util.module_from_spec(spec)
+        spec.loader.exec_module(version_module)
+        return version_module.version
+    except Exception as e:
+        print(f"Error loading version: {e}", file=sys.stderr)
+        return None
 
 
 setup(name='rosinstall',
